{% extends 'layout.html' %}

{% block body %}
    <style>
        .btnstretch {
            width: 100%;
        }
        .wait {
            background-color: white;
        }
        .declinedred {
            background-color:orangered;
        }
        .acceptedgreen {
            background-color: green;
        }
    </style>
    <h1>Appointments</h1>
    <table class="table table-striped">
        <tr>
            <th>Number</th>
            <th>Hospital</th>
            <th>Doctor</th>
            <th>Problem</th>
            <th>Date</th>
            <th>Time</th>
            <th>Status</th>
            <th><a href="/addappoint" class="btn btn-default btnstretch">New</a></th>
        </tr>
        {% for apt in apt %}
            <tr>
                <td>{{apt.id}}</td>
                <td>{{apt.HospName}}</td>
                <td>{{apt.DocName}}</td>
                <td>{{apt.Problem}}</td>
                <td>{{apt.date}}</td>
                <td>{{apt.time}}</td>
                <td class="status">{{apt.status}}</td>
                <td><a href="/deleteappoint/{{apt.id}}" class="btn btn-default btnstretch">Delete</a></td>
            </tr>
        {% endfor %}
    </table>
    <script>
        $(function () {
            $(".table-striped").find("tr").each(function () {
                var status = $(this).find(".status").html();
                if (status == "Declined") {
                    $(this).addClass("declinedred");
                }
                if (status == "Accepted") {
                    $(this).addClass("acceptedgreen");
                }
            });
        });
        function declined() {
            alert("declined func");
            for (let index = 1; index < 9; index++) {
                var x = String(index);
                var eleid = "boxes".concat(x);
                var boxtype = document.getElementById(eleid);
                boxtype.classList.remove("wait");
                boxtype.classList.add("declinedred");
            }
        }
        function accepted() {
            alert("accepted func");
            for (let index = 1; index < 9; index++) {
                var x = String(index);
                var eleid = "boxes".concat(x);
                var boxtype = document.getElementById(eleid);
                boxtype.classList.remove("wait");
                boxtype.classList.add("acceptedgreen");
            }
        }
    </script>
{% endblock %}